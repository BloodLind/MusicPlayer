<customView:CustomView 
    
    x:Class="MusicPlayer.WPF.Views.NowPlayingView"
              xmlns:customView="clr-namespace:MusicPlayer.WPF.Infrastructure"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:MusicPlayer.WPF.Views"
             xmlns:converters="clr-namespace:MusicPlayer.WPF.Services"
               xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" 
    xmlns:viewmodels="clr-namespace:MusicPlayer.Core.ViewModels;assembly=MusicPlayer.Core"
    d:DataContext="{d:DesignInstance Type=viewmodels:NowPlayingViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="720" d:DesignWidth="1280"
    
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.FontWeight="Medium"
        TextElement.FontSize="14"
        FontFamily="{materialDesign:MaterialDesignFont}">


    <customView:CustomView.Resources>
        <converters:TimeConverter x:Key="TimeConverter"></converters:TimeConverter>
    </customView:CustomView.Resources>
    <Grid>

        <Image Source="{Binding CurrentTrack.Image,UpdateSourceTrigger=PropertyChanged}" Stretch="UniformToFill"
               Opacity="0.9">
            <Image.Effect>
                <BlurEffect Radius="75"/>
            </Image.Effect>
        </Image>

        <Grid>
            <Grid.RowDefinitions>
                
                <RowDefinition Height="0.3*"></RowDefinition>
                <RowDefinition Height="4.5*"/>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">

                <materialDesign:Card DockPanel.Dock="Top" MouseDown="Card_MouseDown"
                                     
                                 Background="Transparent"
                                 materialDesign:ShadowAssist.ShadowDepth="Depth0">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top">



                        <Button
                    Click="ClickMinimizeWindow"
                    Width="50"
                    Height="25"
                    Style="{DynamicResource MaterialDesignFlatButton}">
                            <materialDesign:PackIcon
    Kind="WindowMinimize"
    Height="18"
    Width="18" />

                        </Button>

                        <Button
                    Click="ClickMaximizeWindow"
                    Width="50"
                    Height="25"
                    Style="{DynamicResource MaterialDesignFlatButton}">
                            <materialDesign:PackIcon
    Kind="WindowMaximize"
    Height="18"
    Width="18" />

                        </Button>


                        <Button
                    Click="ClickClose"
                    Width="50"
                    Height="25"
                    Style="{DynamicResource MaterialDesignFlatButton}">
                            <materialDesign:PackIcon
    Kind="WindowClose"
    Height="18"
    Width="18" />

                        </Button>

                    </StackPanel>
                </materialDesign:Card>

            </Grid>
            

            <Grid Grid.Row="1">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <Rectangle
                        Grid.Column="0"
                        Margin="35"
                       RadiusX="15"
                           RadiusY="15"
                    materialDesign:ShadowAssist.ShadowDepth="Depth0">

                    <Rectangle.Fill>
                        <ImageBrush ImageSource="{Binding CurrentTrack.Image,UpdateSourceTrigger=PropertyChanged}" Stretch="Uniform">

                        </ImageBrush>
                    </Rectangle.Fill>
                   
                </Rectangle>


                <materialDesign:Card Grid.Column="1"
                                     UniformCornerRadius="15"
                                     Margin="35"
                                     Background="{DynamicResource MaterialDesignDarkBackground}"
                                     Opacity="0.4"
                                     >
                </materialDesign:Card>

                    <Grid Grid.Column="1"
                        Margin="50">

                    <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center">
                        <TextBlock Margin="15" FontSize="18" Text="{Binding CurrentTrack.Title, StringFormat='Title: {0}', UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                        <TextBlock Margin="15" FontSize="18" Text="{Binding CurrentTrack.Album, StringFormat='Album: {0}', UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                        <TextBlock Margin="15" FontSize="18" Text="{Binding CurrentTrack.Artist, StringFormat='Artist: {0}', UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                        <TextBlock Margin="15" FontSize="18" Text="{Binding CurrentTrack.PlayTime,Converter={StaticResource TimeConverter}, StringFormat='Duration: {0}', UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                        <TextBlock Margin="15" FontSize="18" Text="{Binding CurrentTrack.FilePath, StringFormat='Path: {0}', UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                    </StackPanel>
                        
                    </Grid>
                    
                    


            </Grid>
            
            
            <materialDesign:Card Grid.Row="2"
                                 VerticalAlignment="Bottom"
                Opacity="0.80"
                UniformCornerRadius="8"
                Background="{DynamicResource MaterialDesignDarkBackground}"
                    materialDesign:ShadowAssist.ShadowEdges="All"
                
                Height="110">


                <Grid>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="1.5*"></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>


                    <Button
                        HorizontalAlignment="Left"
  Style="{DynamicResource MaterialDesignFlatButton}"
                                        Background="Transparent"
                        Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=customView:CustomView},Path=DataContext.ReturnCommand}">

                        <materialDesign:PackIcon
                            Foreground="White"
    Kind="ArrowTopLeftThick"
    Height="20"
    Width="20" />
                    </Button>

                    <Grid Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center" Width="450">

                        <StackPanel Orientation="Horizontal"
                                            HorizontalAlignment="Center">

                            <Button
  Style="{DynamicResource MaterialDesignFlatButton}"
                                Command="{Binding ShuffleCommand}"
                                        Background="Transparent">

                                <materialDesign:PackIcon
                                    Foreground="White"
    Kind="ShuffleVariant"
    Height="20"
    Width="20" />
                            </Button>

                            <Button
  Style="{DynamicResource MaterialDesignFlatButton}"
                                        Background="Transparent"
                                Command="{Binding PreviousCommand}">

                                <materialDesign:PackIcon
                                    Foreground="White"
    Kind="SkipPrevious"
    Height="20"
    Width="20" />
                            </Button>

                            <Button
                                
                                
  Style="{StaticResource MaterialDesignFloatingActionMiniButton}"
                                
                                Background="White"
                                BorderBrush="White"
  ToolTip="MaterialDesignFloatingActionMiniAccentButton"
                                Click="PlayPauseClick"
                                x:Name="PlayPauseButton"
                                >





                                <materialDesign:PackIcon
                             
    Kind="Play"
    Height="25"
    Width="25" />
                            </Button>


                            <Button
  Style="{DynamicResource MaterialDesignFlatButton}"
                                        Background="Transparent"
                                Command="{Binding NextCommand}">

                                <materialDesign:PackIcon
                                    Foreground="White"
    Kind="SkipNext"
    Height="20"
    Width="20" />
                            </Button>


                            <Button
  Style="{DynamicResource MaterialDesignFlatButton}"
                                Command="{Binding RandomCommand}"
                                        Background="Transparent">

                                <materialDesign:PackIcon
                                    Foreground="White"
    Kind="Help"
    Height="20"
    Width="20" />
                            </Button>


                        </StackPanel>


                    </Grid>



                    <Grid Grid.Row="0"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Right"
                          Width="200">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="5*"/>
                        </Grid.ColumnDefinitions>


                        <materialDesign:PackIcon Kind="VolumeHigh"
                                                     Grid.Column="0"
                                                     VerticalAlignment="Center"
                                                 HorizontalAlignment="Center"/>


                        <Slider VerticalAlignment="Center"
                                    Grid.Column="1"
                                    Margin="0,0,15,0"
                                Foreground="White"
                                
                                
  
  Minimum="0"
  Maximum="100"
  Value="25" />


                    </Grid>


                    <Grid Width="{Binding RelativeSource={RelativeSource AncestorType=Grid, Mode=FindAncestor}, Path=ActualWidth}"
                          Grid.Row="1">

                        <Grid>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="25*"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>


                            <Slider Grid.Column="1"
                                        VerticalAlignment="Center"
                                    Margin="5"
                                        Foreground="White"
                                        MouseLeftButtonUp="Slider_MouseLeftButtonUp"
                                    PreviewMouseLeftButtonDown="Slider_PreviewMouseLeftButtonDown"
                                        IsMoveToPointEnabled="True"
                                    Thumb.DragCompleted="Slider_DragCompleted"
  Maximum="{Binding CurrentTrack.PlayTime, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
  Value="{Binding CurrentPosition}" />


                            <TextBlock Grid.Column="0"
                                        
                                               Margin="5"
                                        
                                        FontSize="13"
                                        VerticalAlignment="Center"
                                               HorizontalAlignment="Right"
                                        Text="{Binding CurrentPosition, Converter={StaticResource TimeConverter},
                                UpdateSourceTrigger=PropertyChanged}"
                                        ></TextBlock>


                            <TextBlock Grid.Column="2"
                                        
                                               Margin="5"
                                        
                                        FontSize="13"
                                        VerticalAlignment="Center"
                                               HorizontalAlignment="Right"
                                        Text="{Binding CurrentTrack.PlayTime, Converter={StaticResource TimeConverter},
                                UpdateSourceTrigger=PropertyChanged}"
                                        ></TextBlock>


                        </Grid>
                        
                    </Grid>


                </Grid>




            </materialDesign:Card>


        </Grid>

    </Grid>
</customView:CustomView>
